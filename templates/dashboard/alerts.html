{% extends 'base.html' %}

{% block title %}Alerts - Zinara System{% endblock %}

{% block content %}
<div class="row mb-3">
	<div class="col-12">
		<h3><i class="fas fa-bell"></i> Alerts</h3>
		<p class="text-muted">System and compliance alerts</p>
	</div>
</div>

<div class="card">
	<div class="card-body">
		{% if alerts %}
		<div class="list-group">
			{% for a in alerts %}
			<div class="list-group-item d-flex justify-content-between align-items-center">
				<div>
					<span class="badge me-2 bg-{% if a.severity == 'critical' %}danger{% elif a.severity == 'high' %}warning{% else %}info{% endif %}">{{ a.severity|title }}</span>
					<strong>{{ a.title }}</strong>
					<div class="text-muted small">{{ a.message }}</div>
					<div class="text-muted small">{{ a.created_at|date:"M d, H:i" }}</div>
				</div>
				{% if not a.acknowledged %}
				<form method="post" class="ms-3">{% csrf_token %}
					<input type="hidden" name="alert_id" value="{{ a.id }}">
					<button class="btn btn-sm btn-outline-secondary" type="submit">
						<i class="fas fa-check"></i> Acknowledge
					</button>
				</form>
				{% else %}
				<span class="badge bg-success">Acknowledged</span>
				{% endif %}
			</div>
			{% endfor %}
		</div>
		{% else %}
		<p class="text-muted">No alerts</p>
		{% endif %}
	</div>
</div>
{% endblock %}

