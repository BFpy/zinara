{% extends 'base.html' %}

{% block title %}Vehicle {{ vehicle.vehicle_id }} - Zinara System{% endblock %}

{% block content %}
<div class="row mb-3">
	<div class="col-12 d-flex justify-content-between align-items-center">
		<h3><i class="fas fa-car"></i> Vehicle {{ vehicle.vehicle_id }}</h3>
		<a class="btn btn-outline-secondary" href="{% url 'dashboard:vehicle_list' %}"><i class="fas fa-arrow-left"></i> Back</a>
	</div>
</div>

<div class="row">
	<div class="col-md-6 mb-3">
		<div class="card">
			<div class="card-header"><strong>Details</strong></div>
			<div class="card-body">
				<div class="row mb-2"><div class="col-5 text-muted">Type</div><div class="col-7">{{ vehicle.vehicle_type }}</div></div>
				<div class="row mb-2"><div class="col-5 text-muted">Region</div><div class="col-7">{{ vehicle.region }}</div></div>
				<div class="row mb-2"><div class="col-5 text-muted">Licensed</div><div class="col-7">
					<span class="badge bg-{% if vehicle.is_currently_licensed %}success{% else %}danger{% endif %}">
						{% if vehicle.is_currently_licensed %}Yes{% else %}No{% endif %}
					</span>
				</div></div>
				<div class="row mb-2"><div class="col-5 text-muted">Risk Score</div><div class="col-7">
					<span class="badge bg-{% if vehicle.risk_score >= 0.7 %}danger{% elif vehicle.risk_score >= 0.4 %}warning{% else %}success{% endif %}">
						{{ vehicle.risk_score|floatformat:2 }}
					</span>
				</div></div>
			</div>
		</div>
	</div>
	<div class="col-md-6 mb-3">
		<div class="card">
			<div class="card-header"><strong>Prediction History</strong></div>
			<div class="card-body">
				<div class="table-responsive">
					<table class="table table-sm">
						<thead><tr><th>Date</th><th>Prediction</th><th>Score</th></tr></thead>
						<tbody>
							{% for p in prediction_history %}
							<tr>
								<td>{{ p.prediction_date|date:"M d, H:i" }}</td>
								<td>
									<span class="badge bg-{% if p.predicted_unlicensed %}danger{% else %}success{% endif %}">
										{% if p.predicted_unlicensed %}High Risk{% else %}Low Risk{% endif %}
									</span>
								</td>
								<td>{{ p.risk_score|floatformat:2 }}</td>
							</tr>
							{% empty %}
							<tr><td colspan="3" class="text-muted">No predictions yet</td></tr>
							{% endfor %}
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}

